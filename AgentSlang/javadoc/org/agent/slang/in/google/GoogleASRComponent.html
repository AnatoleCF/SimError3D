<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="fr">
<head>
<!-- Generated by javadoc (1.8.0_241) on Wed Mar 25 11:57:13 CET 2020 -->
<title>GoogleASRComponent (AgentSlang API)</title>
<meta name="date" content="2020-03-25">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="GoogleASRComponent (AgentSlang API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/agent/slang/in/google/GoogleASRComponent.html" target="_top">Frames</a></li>
<li><a href="GoogleASRComponent.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.ib.component.base.AbstractComponent">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.agent.slang.in.google</div>
<h2 title="Class GoogleASRComponent" class="title">Class GoogleASRComponent</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.ib.component.base.AbstractComponent</li>
<li>
<ul class="inheritance">
<li>org.ib.component.base.MixedComponent</li>
<li>
<ul class="inheritance">
<li>org.agent.slang.in.google.GoogleASRComponent</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.ib.component.base.ActiveListener, org.ib.component.base.Closeable, org.ib.component.base.Publisher, org.ib.component.base.ReactiveListener, org.ib.component.base.Sink, org.ib.component.base.Source</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">GoogleASRComponent</span>
extends org.ib.component.base.MixedComponent</pre>
<div class="block">Convert Speech to Text with using Chrome API. 
 Modifyed by naser ghannad.
 This component enables the use of Google's Speech Recognition engine.
 <p>
 Using the Google&nbsp;Speech&nbsp;API directly is no longer an ideal solution
 because it is limited to 50&nbsp;requests/day (even with an API key).
 However, the implementation of the
 <a href="https://dvcs.w3.org/hg/speech-api/raw-file/9a0075d25326/speechapi.html">
 Web&nbsp;Speech&nbsp;API</a> in Google&nbsp;Chrome is exempt from this limit,
 hence the dirty workaround that this component implements.
 <p>
 The component works by setting up a WebSocket server and having a Web page
 open in Chrome connect to it and send it the results of the
 Web&nbsp;Speech&nbsp;API. Unfortunately, for Chrome to authorize the Web page
 to access the microphone and remember the authorization, the page has to be
 served via an HTTPS server. The page, in turn, needs to access the WebSocket
 server via TLS too. It is thus necessary to create a self-signed certificate
 and tell Chrome to accept it as valid. The process is described below.

 <h3>Setting up the component</h3>

 <h4>Creating the certificate</h4>

 The following command can be used to create the certificate. When asked for
 the certificate information, enter <code>localhost</code> for the
 Common Name/CN; the other values do not matter as much.

 <pre><code>
 openssl req -new -newkey rsa:4096 -days 5000 -nodes -x509 -sha512 -out cert.crt -keyout cert.key
 </code></pre>

 The resulting files must then be converted into a PKCS #12 file. This can be
 done by issuing the following command and entering an empty password (adjust
 the output path as needed):

 <pre><code>
 openssl pkcs12 -export -in cert.crt -inkey cert.key -out $PATH_TO_AGENTSLANG/data/org/agent/slang/in/google/cert.p12
 </code></pre>

 The resulting <code>.p12</code> file can actually be installed anywhere, but
 this location is where the default configuration files point to.

 <h4>Making Chrome accept the certificate</h4>

 <h5>Under Microsoft Windows</h5>

 If the component is used as-is, Chrome will complain that the certificate is
 invalid. To solve this problem, open Chrome's settings, go to Advanced
 &rarr; HTTPS/SSL &rarr; Manage certificates, import the <code>cert.crt
 </code> file previously created and choose "Trusted Root Certification
 Authorities" as the destination.
 <p>
 Finally, restart Chrome (this is a very important part of the process).

 <h5>Under GNU/Linux</h5>

 Open Chrome, go to its Settings, then Advanced &rarr; HTTPS/SSL &rarr;
 Manage Certificates, go to the "Authorities" tab and import <code>cert.crt
 </code>.

 <h3>Usage</h3>

 <h4>Configuration</h4>

 The <code>certificate</code> parameter of the component must point to a
 valid <code>*.p12</code> file (as created in the previous section). In
 addition, the <code>language</code> parameter must contain the language
 code corresponding to the language that should be used for recognition.

 <h4>Running</h4>

 Once AgentSlang is running with a configuration file that makes use of this
 component, the URL <a href="https://localhost:8149/"><code>
 https://localhost:8149/</code></a> should be opened in Chrome (this should
 happen automatically) and permission to use the microphone should be granted,
 if Chrome asks.

 <h3>Communication protocol</h3>

 This section describes the exact protocol used over the WebSocket.
 <p>
 Note that the AgentSlang component being the WebSocket server, it must be
 started before the Web browser.

 <h4>Initialization</h4>

 Once the connection between the browser and the AgentSlang component is
 established, the component sends the browser the language code that should be
 used for speech recognition.
 <p>
 (Technically, the component could send the language code at any moment, even
 though it currently does not.)

 <h4>Recognition loop</h4>

 After it has received the language code, the browser starts speech
 recognition. Once a result is available, it is sent through the WebSocket.
 <p>
 After each iteration, recognition is started again, allowing for continuous
 recognition. (The <code>SpeechRecognition</code> object natively supports a
 continuous mode, but it seems slower than using the non-continuous mode
 repeatedly.)
 <p>
 At any moment, the AgentSlang component can send either <code>stop</code> or
 <code>start</code> to stop or resume recognition. (It is currently used for
 suspending recognition while the agent speaks, so that it does not hear
 itself.)

 <h4>End</h4>

 If the AgentSlang component is closed, the Web browser automatically stops
 the recognition engine. If the AgentSlang component is restarted, the Web
 page must be reloaded.
 <p>
 Conversely, if the Web page is closed while the AgentSlang component is still
 active, it can simply be reopened.

 OS Compatibility: Windows and Linux</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.ib.component.base.AbstractComponent">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.ib.component.base.AbstractComponent</h3>
<code>config, heartbeatTopic, INBOUND_GROUP, inboundManager, outboundManager, systemEventTopic</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/agent/slang/in/google/GoogleASRComponent.html#GoogleASRComponent-java.lang.String-org.ib.component.model.ComponentConfig-">GoogleASRComponent</a></span>(java.lang.String&nbsp;outboundPort,
                  org.ib.component.model.ComponentConfig&nbsp;config)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/agent/slang/in/google/GoogleASRComponent.html#close--">close</a></span>()</code>
<div class="block">Closes and stops the connection with google ASR port.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/agent/slang/in/google/GoogleASRComponent.html#definePublishedData--">definePublishedData</a></span>()</code>
<div class="block">Checking type of output data.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/agent/slang/in/google/GoogleASRComponent.html#defineReceivedData--">defineReceivedData</a></span>()</code>
<div class="block">Checking type of input data</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/agent/slang/in/google/GoogleASRComponent.html#handleData-org.ib.data.GenericData-">handleData</a></span>(org.ib.data.GenericData&nbsp;data)</code>
<div class="block">Managing input and output data in the class.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/agent/slang/in/google/GoogleASRComponent.html#setupComponent-org.ib.component.model.ComponentConfig-">setupComponent</a></span>(org.ib.component.model.ComponentConfig&nbsp;config)</code>
<div class="block">Setting up the component based on input configuration.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.ib.component.base.MixedComponent">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.ib.component.base.MixedComponent</h3>
<code>act</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.ib.component.base.AbstractComponent">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.ib.component.base.AbstractComponent</h3>
<code>addInboundTypeChecker, addOutboundTypeChecker, generateSystemTopic, getMachinePortPattern, handleSystemEvents, publish, publishData, react, setupComponentConfig, subscribe</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="GoogleASRComponent-java.lang.String-org.ib.component.model.ComponentConfig-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GoogleASRComponent</h4>
<pre>public&nbsp;GoogleASRComponent(java.lang.String&nbsp;outboundPort,
                          org.ib.component.model.ComponentConfig&nbsp;config)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setupComponent-org.ib.component.model.ComponentConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupComponent</h4>
<pre>protected&nbsp;void&nbsp;setupComponent(org.ib.component.model.ComponentConfig&nbsp;config)</pre>
<div class="block">Setting up the component based on input configuration.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>setupComponent</code>&nbsp;in class&nbsp;<code>org.ib.component.base.AbstractComponent</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - component configuration.</dd>
</dl>
</li>
</ul>
<a name="definePublishedData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>definePublishedData</h4>
<pre>public&nbsp;void&nbsp;definePublishedData()</pre>
<div class="block">Checking type of output data.</div>
</li>
</ul>
<a name="defineReceivedData--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defineReceivedData</h4>
<pre>public&nbsp;void&nbsp;defineReceivedData()</pre>
<div class="block">Checking type of input data</div>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Closes and stops the connection with google ASR port.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>org.ib.component.base.Closeable</code></dd>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>close</code>&nbsp;in class&nbsp;<code>org.ib.component.base.AbstractComponent</code></dd>
</dl>
</li>
</ul>
<a name="handleData-org.ib.data.GenericData-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>handleData</h4>
<pre>protected&nbsp;void&nbsp;handleData(org.ib.data.GenericData&nbsp;data)</pre>
<div class="block">Managing input and output data in the class.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>handleData</code>&nbsp;in class&nbsp;<code>org.ib.component.base.AbstractComponent</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>data</code> - input data</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/agent/slang/in/google/GoogleASRComponent.html" target="_top">Frames</a></li>
<li><a href="GoogleASRComponent.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.ib.component.base.AbstractComponent">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
